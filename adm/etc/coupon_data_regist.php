<?
// 오케이캐쉬백 2022-03-10 ~ 2022-05-06 일까지 유효분 등록
// 웹브라우저상에서 실행금지
// php -q /home/crowdfund/public_html/adm/etc/coupon_data_regist.php yyyymmddHH


include_once("/home/crowdfund/public_html/common.cli.php");

$action = $_SERVER['argv']['1'];

$pid        = "okcashbag";
$avail_sdd  = "2022-04-08";		//유효기간 시작일
$avail_edd  = "2022-06-05";		//유효기간 종료일
$reg_dt     = date('Y-m-d H:i:s');

$cset = "737987764070
738369714888
736259572765
734657072539
739170321745
736119102746
730363839572
739068464098
736464820467
732657985106
737526584936
737189872534
733899005608
737293078732
739233474633
733278232398
733845321473
738962300860
737997729979
737131976968
737170104831
733004295762
731862992916
734520970256
736302021350
737802142026
732996768142
737191835962
732777692632
733840372100
735304917766
736794380223
736315380331
737703883238
738893037263
736796574107
735251252775
735568624982
739115714548
739028258052
739057678949
739640583284
731686972967
731159550800
736800049145
735333889752
735691667400
732466792167
732687431502
735892048174
734829742237
735970741280
730296550576
737062683591
732531230086
737737814638
734272603923
737170662171
732094973374
736310079272
733549246543
739282922533
739749171353
737370906770
738906264866
733848910647
736709398043
738492247798
737197997580
730912311564
739953472090
730268408387
731763268698
739940150857
733939617695
735263307527
734958618891
731201659756
737269676479
738277037352
733316509296
737994613142
734306879365
735309329558
736685723635
737610177107
734463527573
738934972203
737172716627
735303554003
730765579932
733224013499
737082712649
736426242224
735131032277
731278623753
738672869592
732016929108
732513813275
734783411272
730776255588
733952207853
735425485615
733522043388
734299497745
734583581182
734327109170
733602059017
733962642351
735397346210
736196460084
737817129506
730707203466
734843985916
736437011746
733829507037
738104785390
734299079156
737226785084
733395539863
733424649241
737144918460
730036507975
736507087783
738598852245
738874355702
736957818863
737113059012
737843437993
737401786205
739453160705
738679755304
739304127678
732925173375
736916706852
738051322151
737672970232
736041477580
736844092582
736299939389
739833633986
735426557337
735604031421
733469385605
730124232685
735561434480
730158794752
732700444034
730158651712
733047759648
739584583330
735937719804
735221241977
738248966309
736774124434
738736719168
735223040720
732344061001
733331031269
735484070111
739541907361
739594922938
735959961649
734507605414
735344375852
734678402959
737568387952
736074518878
731496507957
731116819796
732189565006
731999467897
731048082776
730193477083
736945467309
733087275954
736064579062
737024004425
738833285544
733762556380
731434817144
731358755034
735196783422
733880350274
733733689014
730077716019
736070767266
739327539454
736419380320
732092904170
736721880981
731447023131
732478831193
730593310532
735220142804
739820548768
730468376050
737502727686
733308717924
733507666884
730449041062
736656158276
733683394764
736018014647
731874793782
730580649268
732659736546
737901159768
739535180835
733463428451
734164423981
731475867845
738430605870
733009147138
736598443834
739305949564
738513044265
734371354112
731220620270
731903508710
733294076746
736910103610
731508050053
730313248925
733079834329
735042350841
730281118637
734474713904
737214024614
739650682202
732181577327
735117296259
730238566315
737420359503
734861875056
737196890397
738946999227
733333843797
734090620534
733333365330
730542299886
733005794345
730438759297
733399088018
731198233990
733069823472
739380427951
731285995984
737193943544
733746257921
733651195451
731856293321
731812174803
731771429607
733919138754
730471580255
732913967321
733847873960
736457500396
731022150648
734322326308
732751483292
737383612868
734928199354
738514904554
730976846026
738460102623
734898873846
738295433035
732481186229
738438608651
730535795210
733455094895
732921696913
731235062757
735137593683
730971900649
737643328943
739102441249
733566434488
734314718203
734475788091
739339813087
731587918336
733978822047
739274545199
732833138158
739816081792
735142156415
734807140283
734688668689
736419641291
731967953323
732955965722
738862029253
734900405728
731286049049
733700301442
730322616763
739905962358
738847978589
735487915765
739120290424
732783995675
732701627475
734735885115
730805817635
735821480125
730634536223
737177444563
731351589102
735412941785
736563934268
734947756190
730262775729
732916267409
738837024196
734789626651
737097911796
735829568833
736701443571
733271064471
730984511412
739417801317
735350949343
735976030585
730614599598
737426089176
737895584321
735714365965
733403097550
733696300524
733954156237
737649150350
734676235402
733226893739
739865335885
730642082445
736911413235
737633189828
739054290160
739810027241
737878951848
731056646283
736603381151
734815625835
735058438820
733192915027
733852211433
734325120122
734563679759
736597794632
734632615538
738240263619
737180813820
735101889428
738120697763
738325638363
738348499357
733697758423
732399201513
734703237506
737283238115
736248432725
732615238475
732477233492
733641131238
739370538325
739472098983
739892036111
732042707682
734037161512
731586867397
737753404453
732019984234
737977729981
733538293600
739598051647
733414386094
736761612275
737522325631
731822809637
737842756653
737540985729
730861350260
731447119372
732493400931
739074714836
738318937613
737402641127
738563330084
730456676304
738247745873
738394173134
738622540182
736475068880
733142995601
730372023591
731180859170
737370437647
734785883866
738302456519
739203176277
733162536746
734876381868
738420897248
731061150698
736743439933
735567216000
739678739307
735059232953
739658891270
733117614984
737783473231
733069108188
737808152051
735410334861
733433628557
736146420781
735945909440
738484421380
731925562034
735496689291
737320259217
736514657979
731528018885
738109748699
739705927825
732700476667
734706660966
734991877213
737930876910
739442528812
737708058437
731742426761
734318089765
730170191176
732722237569
739369408847
736086139537
736905255371
731919724795
737092396328
737199726947
733849369162
735067573877
733208815716
731558736565
730853591183
732263621681
733051688228
730214315729
736630347283
737174046121
734414139879
730081692932
738317152700
738788972873
736411063823
734900372611
738932835165
736307360252
738256475179
731967374490
732066351852
730346862235
730999176308
734659473146
735578605749
735203488957
734048217699
737970976009
731375579244
734143644912
732868318708
732842520580
734703250053
737741881679
738808694793
737675459870
738741851905
730446812097
739741401687
736426938196
733422263508
736056999354
730773642644
730999687344
731599609929
731109485667
735882784343
733803688739
732876515127
734408808883
734849513734
735745850749
731091240388
732214831813
734851755881
734590472225
737647824035
734503246131
735147698624
731317816811
738092474281
730565628780
739789608794
731532125154
730309620788
730807006844
735116312574
735772257182
738272115278
737976781964
731028239969
730922091102
735725901776
736878784050
735364409484
739619091436
739678837585
736982418039
737181231151
736220457171
736753154763
730940121993
730192289872
736938181260
736282177042
736168570002
734375512805
732350708765
736454071597
736985822194
735488826233
731923922496
732535371419
736707798903
732646837915
735445382884
732998430533
733423928416
738231441857
734062912131
737722818504
738321323976
732815538481
738205971003
736363940582
738556152453
739343384314
732368794521
735860417942
734075809081
739928099329
739935916971
730941588152
738891890273
737613870158
732766603836
736896076167
731433786578
737724977199
739489380626
738939163654
737927691736
737389241418
731362104571
738926592978
737739139934
733690045440
730505995421
732443443482
734929986472
735060460536
736350410231
737149350918
731401862043
732148347490
737855388212
730582105483
736794766517
736496123289
736378420396
733835194217
738146700296
738699505159
735026149267
731131306873
739057933259
732306081396
731207205732
732508315886
731615348638
730523074891
732237027586
735779759920
734082172971
732346570868
732491766169
734066414349
733163159405
737840782349
736973760440
736485629063
734513616446
739922847646
734951702015
737159822008
737846385847
733897989386
736878329829
738688597374
736717458247
735779853676
734162669680
738643919244
731941004313
733836015697
736967043061
735847282645
739078505101
738444320005
732561582672
731923479282
737726762232
733723905737
732021132605
734428296382
736340368052
733449662732
734380307867
736752333720
737516291494
730227550156
731505692724
733770493725
739759986888
732681540575
735104711728
735549448372
730499763744
738213850352
738106607903
737265027554
737993812959
736487486447
731722381135
730065941467
738883779304
733224693379
739583695164
733303497701
736541736867
730464429343
736855279332
737473772232
738468680860
738955200728
736272872358
737497382394
730472927383
735798461821
732666469402
735185596904
738483314495
732172288136
734239145596
739134716093
736689050163
734053343996
733360211042
730480310930
738165290429
735618466897
739804749435
739946100154
737434333677
730534080823
733411528608
738105333338
733700158846
739896157921
734268654204
735346360889
733996933636
731715062946
737560041110
734543209948
734897316340
735693799616
733053105757
734766011609
737900353625
732873527689
734446367950
734392433997
734529443315
736200257086
735608654752
736718882255
733569968619
733372560503
733553619241
739895280080
734600466396
730726738301
737154573344
730309927847
732748747959
732716377317
730405560843
733487757613
736637778818
735116683400
739517563326
737455795004
731844994867
733109984177
734144329988
738478201559
731772254421
733355154935
738697273317
736519545489
734599816435
738847673886
738366614846
733684014270
730611585286
735433323535
739334890534
731566871560
739589813161
731836385231
738955134432
732177056535
739094105978
735169400630
738296178981
735132977455
739088422771
731304504920
735920363195
732619089181
738041471362
732046834324
736468989290
736484695604
737182336725
736532901004
736915522155
732469415196
730544049150
734600603261
735157378186
732805337060
734779565915
736499536877
730234324052
731137308867
736354636348
731713015962
732225049573
731434730556
732578781860
732118538859
735555294659
730421267684
734908758148
733217234810
732220498628
738899685829
736807248992
734472151875
731634196960
731932892935
735237194835
736745036065
737296322514
735089796461
730358398429
732166989357
735566021260
732186910572
731867624693
739252089598
736026158795
732003856161
737668324075
732338570674
737372135470
733033360749
733559932183
733638156205
734790354857
736325026144
738808030433
734476151270
739403370658
732137157843
733948144398
731823004270
738246145373
738583762680
730822429641
731948638719
731754802416
736790361049
730457063985
736355234908
731992993466
736692832956
738833759591
736355171437
734169417149
737045012174
733705952228
734180407910
733488464195
737502335412
730140760941
738597631659
730498053792
730135636853
734437590067
731708637750
730085501424
730184066398
735512003361
732956649429
739681813518
730878241796
736799501239
733325779435
738222113618
738465968544
735155555147
733959305876
736448980498
732323407734
736692401539
735409957972
733511889433
733308096131
738685240725
731004598284
732348443680
735063284849
735670631654
737453732273
734880359740
736872387264
736852211320
738585870552
737667914151
733696693086
730964147145
737837384359
735543802273
734154748783
733758345815
738995245325
734422030387
733473952640
737207572723
736225239616
730051480675
733899054021
735564214779
739886403978
739052999702
731152372149
737239776405
733537587294
732135596033
737750598704
730977865156
738449725553
736745391057
736491177488
738870391760
731211241938
731167234939
737613041974
737734917582
736656362622
734242273175
737265240745
738258935406
739303890140
735499796590
738120918392
733238565591
732156002013
738256894866
736098974662
735602177906
732452259587
730849151469
730406233776
732867972719
735894947617
736382733373
731016802896
739949513309
730618294934
737852699277
730678011273
739412212054
739892287732
732208119581
731633563217
737389900162
738743090161
731060036340
739026996946
738186537708
737576675182
737620447742
739210886871
734626876150
734385556320
735334677962
737209191064
739227033464
735306783479
733850484419
735411144843
737591977296
734337785452
739071610757
736972470872
738862059553
737310105242
735559493363
739986892966
733447591331
732350325402
734752667398
734447420141
733268692193
730761681150
732884947695
733406684213
735251499472
737429007132
738849554724
739811630088
738608257481
739248422167
737702065222
738093393909
737639426172
734070541872
734853068786
731050882127
738868615931
733735381859
735879661313
738073222387
732463686627
737560192181
731935415368
733031471094
737444615041
730069875906
734286046195
734100297880
735077020459
731470217169
737309894188
736960806125
736276970144
732229667399
735060601988
734854014519
733050187011
734757214259
733494791977
736107789216
734890779961
739154101475
734691033958
739656724936
737352638090
730181005756
735565769941
735863362509
730873395826
736022498426
734773944092
733872775415
738043690319
737783893870
738298778032
735630752788
731186538432
734496108037
731483865551
739332811046
735026744188
735016380166
739100153439
735884456076
736181319907
736332185879
730815647157
732959988677
739140659504
733092717487
736722850467
734153154161
730029101224
738995462050
735505007747
738990530620
734462997743
736377248044
731233507960
730553038248
736638856184
736731148106
736096160737
734450399890
737529784187
734710122312
734593433372
737188558607
730364087353
738558440492
739750182058
738431541679
733096619320
735556436623
739733728952
731543587622
734484813169
735266180475
739283106008
730107447406
739136016390
739815265333
739234535670
731375642186
735327069343
732410999352
732289196325
739799018936
733612945358
733589348249
734204594281
734494967349
732252678775
739163364168
730303339550
731933735870
736989323138
734406909043
730172657748
739036811483
732630434054
737703036861
739419789194
735785146373
739298149073
732366421632
732974391013
735765597707
735957836455
739128622726
731446831779
734325104302
738831137411
732893164840
738183012489
732192318110
738922804950
734225324960
730080138639
736546714810
738476442789
738956086646
735870134740
733528361886
737229978793
739111039321
730598723375
736399967361
730020203048
734565778861
736383099857
737568479966
735292364064
733461251254
735804385423
730979527364
731417094383
737877542571
733308251253
739341479582
738391072219
733989985516
734626611863
737925950474
734978495792
731671188810
734439908021
736197598796
737957763340
739742879826
730018236895
739046017957
735270175910
737805263013
735459449596
735883441322
737653673740
732715865863
736999624638
739639809834
731309134720
733778063989
738132709367
731528230044
736206082178
733678021857
737805373044
739207879341
735343691999
735444741409
730227746076
737402218028
735418884629
733517104425
734486904836
730156256891
732576324457
736054761374
730594616687
734453538642
738207885017
733865190765
731060512919
738182841870
732492047616
731235980550
735442558941
732815359615
739473365694
736700470615
738949523368
733606888585
739762670643
733169577968
731244447795
738107248245
732827364680
732904276267
737550501336
738954015050
738720233264
737927178055
736020341509
734948462589
733146030326
732428279358
730342292702";

$COUPON = explode("\r\n", $cset);
$loop_count = count($COUPON);

for($i=0,$j=1; $i<$loop_count; $i++,$j++) {

	$is_recorded = sql_fetch("SELECT COUNT(idx) AS cnt FROM cf_partner_coupon_bank WHERE pid='".$pid."' AND coupon_serial_no='".$COUPON[$i]."'")['cnt'];

	// 이미 존재하는 쿠폰번호인 경우 저장하지 않는다!!!

	echo $j . ": ";
	if(!$is_recorded) {
		$sqlx = "INSERT INTO cf_partner_coupon_bank (pid, coupon_serial_no, reg_dt, avail_sdd, avail_edd) VALUES('".$pid."', '".$COUPON[$i]."', '".$reg_dt."', '".$avail_sdd."', '".$avail_edd."')";
		echo $sqlx;
		if($action==date('YmdH')) {
			$resx = sql_query($sqlx);
			echo "; (".sql_affected_rows().")";
		}
	}
	echo "\n";

}

sql_close();
exit;

?>